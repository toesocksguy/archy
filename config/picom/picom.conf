## Modified to have rules organized to the rules section at bottom,
## legacy options commented out for reference.

########################################
# PERFORMANCE SETTINGS
########################################

backend = "egl";
#   Rendering backend: "xrender" (CPU), "glx" (OpenGL), "egl" (OpenGL with EGL),
#   or "xr_glx_hybrid". EGL is efficient on modern GPUs.

dithered-present = false;
#   Disables dithering during presentation; can improve speed.

vsync = true;
#   Prevents screen tearing by syncing with monitor refresh rate.

use-damage = true;
#   Redraw only changed parts of the screen for better performance.

fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 3;
#   Fade animation timing — small values = snappier animations.

log-level = "warn";
#   Lower log verbosity for less CPU usage.

########################################
# AESTHETICS SETTINGS
########################################

## Opacity ##
# inactive-opacity = 0.8;      # Makes inactive windows slightly transparent.
# frame-opacity = 0.7;         # Sets window frame opacity.
# active-opacity = 1.0         # Keeps active windows fully opaque.
# inactive-dim = 0.05          # Dims inactive windows by 5%.

# inactive-opacity-override = true
#   Forces inactive windows to use your opacity setting.

## Rounded Corners ##
# corner-radius = 15
#   Rounded corner radius in pixels.

# rounded-corners-exclude = [ "class_g = 'Dunst'" ];
#   Keep notifications square.

## Blur ##
blur:
{
  method = "dual_kawase";  # Smooth GPU blur method.
  size = 10;               # Blur size (higher = blurrier).
  strength = 3;            # Blur intensity multiplier.
};

blur-background = true
blur-background-fixed = true
#   Enables background blurring with fixed strength.

########################################
# BLUR EXCLUSIONS
########################################

blur-background-exclude = [
  "class_g = 'Firefox'",
  "class_g = 'google-chrome'",
  "class_g = 'Brave-browser'"
];
#   Prevents blur from affecting Firefox, Chrome, and Brave windows

# blur-kern = "3x3box";    # Example custom blur kernel.
# blur-kern = "5x5gaussian";
## Shadows ##
# shadow = true;
# shadow-radius = 1;
# shadow-opacity = .1
# shadow-offset-x = 0;
# shadow-offset-y = 0;
# shadow-exclude = [
#   "class_g = 'firefox' && argb",
# ]
# shadow-color = "#000000"

########################################
# COMPATIBILITY & BEHAVIOR SETTINGS
########################################

detect-client-opacity = true;
#   Respect app-specific opacity.

use-ewmh-active-win = true;
#   Use window manager hints to track active window.

detect-transient = true;
#   Recognize transient windows (dialogs, popups).

detect-rounded-corners = false;
#   Don't auto-detect — avoids conflicts with manual corner-radius.

fading = true;
#   Enables fade in/out animations.

# dbus = true              # Allow external control via D-Bus.
# daemon = false           # Run in foreground unless you want background mode.

########################################
# ANIMATIONS (NEW IN PICOM 12+)
########################################

animations = (
  {
    triggers = [ "open", "show" ];
    #   Apply when a window is created or shown.
    # preset = "fly-in";
    preset = "appear";
    #   Animation style: "fly-in" slides window into view.
    # direction = "right";   
    #   Direction of fly-in: up, down, left, right.
    duration = 0.2;        
    #   Duration of animation in seconds.
  },
  {
    triggers = [ "close", "hide" ];
    #   Apply when a window is closed or hidden.
    # preset = "slide-out";
    preset = "disappear";
    #   Animation style: "slide-out" slides window away.
    # direction = "down";    
    #   Direction of slide-out.
    duration = 0.2;         
   #   Duration of animation in seconds.
  }
);

########################################
# WINDOW RULES
########################################

rules = (
	# { match = "name = 'dwm'"; opacity = 1; },  # Example custom rule.

	{ match = "focused"; opacity = 1; },        # Active windows fully opaque.
	{ match = "!focused"; opacity = 0.85; },    # Inactive windows slightly transparent.

	{ match = "tooltip"; fade = true; shadow = true; opacity = 0.5; focus = true; full-shadow = false; },
	# Tooltips fade in/out, have shadows, are semi-transparent.

	{ match = "popup_menu"; opacity = 0.7; },   # Popup menus 70% opaque.
	{ match = "dropdown_menu"; opacity = 0.7; } # Dropdown menus 70% opaque.
);

########################################
# LEGACY (FOR REFERENCE ONLY)
########################################
# wintypes:
# {
#   tooltip = { fade = true; shadow = true; opacity = 0.5; focus = true; full-shadow = false; };
#   dock = { shadow = false; clip-shadow-above = true; }
#   dnd = { shadow = false; }
#   popup_menu = { opacity = 0.7; }
#   dropdown_menu = { opacity = 0.7; }
#   normal = { opacity = 1;}
# };

########################################
# TIP: Run `picom -b` to start in background.
########################################
